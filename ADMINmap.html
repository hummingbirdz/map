<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Admin Map â€“ HummingbirdZ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      html, body { margin: 0; padding: 0; height: 100%; }
      #map { width: 100%; height: 100%; }
    </style>
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
  </head>
  <body>
    <div id="map"></div>
    <script>
      mapboxgl.accessToken = 'pk.eyJ1IjoiaHVtbWluZ2JpcmR6IiwiYSI6ImNtZzltZ2J0ejBpdW4yaXF3Zm51MHU2NG0ifQ.kw4YoqlgayEk89rJyFYfMA';

      fetch('admin-data.json')
        .then(res => res.json())
        .then(data => {
          const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/hummingbirdz/cmg9mb6mq009q01scessj51m0',
            center: [-3.53, 50.72],
            zoom: 10
          });

          map.on('load', () => {
            map.addSource('jobs', { type: 'geojson', data });

            map.addLayer({
              id: 'job-markers',
              type: 'circle',
              source: 'jobs',
              paint: {
                'circle-radius': 6,
                'circle-color': ['get', 'companyColor'],
                'circle-stroke-width': 1,
                'circle-stroke-color': '#ffffff'
              }
            });

            const bounds = new mapboxgl.LngLatBounds();
            data.features.forEach(f => {
              const lng = parseFloat(f.geometry.coordinates[0]);
              const lat = parseFloat(f.geometry.coordinates[1]);
              bounds.extend([lng, lat]);
            });

            if (!bounds.isEmpty()) {
              map.fitBounds(bounds, { padding: 50, maxZoom: 15 });
            }
          });
        })
        .catch(err => console.error('Failed to load admin-data.json:', err));
    </script>
  </body>
</html>
